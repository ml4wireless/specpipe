"use strict";(self.webpackChunkdocs_website=self.webpackChunkdocs_website||[]).push([[428],{4550:(e,a,s)=>{s.r(a),s.d(a,{assets:()=>o,contentTitle:()=>i,default:()=>c,frontMatter:()=>r,metadata:()=>d,toc:()=>h});var t=s(4848),n=s(8453);const r={},i="Dashboards",d={id:"dashboard",title:"Dashboards",description:"1. Check Out Our Dashboard for SpecPipe",source:"@site/docs/dashboard.md",sourceDirName:".",slug:"/dashboard",permalink:"/specpipe/dashboard",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{}},o={},h=[{value:"1. Check Out Our Dashboard for SpecPipe",id:"1-check-out-our-dashboard-for-specpipe",level:2},{value:"2. Overview",id:"2-overview",level:2},{value:"3. Build the Dashboard",id:"3-build-the-dashboard",level:2},{value:"1) Install Prometheus and Grafana Helm chart",id:"1-install-prometheus-and-grafana-helm-chart",level:3},{value:"2) Start Prometheus &amp; Grafana",id:"2-start-prometheus--grafana",level:3},{value:"3) Adding NATS exporter",id:"3-adding-nats-exporter",level:3},{value:"4) Adding Grafana Dashboard Template",id:"4-adding-grafana-dashboard-template",level:3},{value:"5) Adding other sources of data",id:"5-adding-other-sources-of-data",level:3}];function l(e){const a={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.h1,{id:"dashboards",children:"Dashboards"}),"\n",(0,t.jsx)(a.h2,{id:"1-check-out-our-dashboard-for-specpipe",children:"1. Check Out Our Dashboard for SpecPipe"}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.strong,{children:"Grafana Endpoint (Dashboards):"})," ",(0,t.jsx)(a.a,{href:"http://ec2-13-56-236-180.us-west-1.compute.amazonaws.com:3000",children:"http://ec2-13-56-236-180.us-west-1.compute.amazonaws.com:3000"})]}),"\n",(0,t.jsx)(a.h2,{id:"2-overview",children:"2. Overview"}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.strong,{children:"Prometheus"})," is a monitoring system and time-based database. We use Prometheus to monitor and gather our system\u2019s status, storing it in its database. The data will then be exported to Grafana for graphical analysis. The goal of using Prometheus and Grafana is to create a ",(0,t.jsx)(a.strong,{children:"dashboard"})," for system administrators to check the system status."]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Untitled",src:s(6862).A+"",width:"3434",height:"1766"})}),"\n",(0,t.jsx)(a.h2,{id:"3-build-the-dashboard",children:"3. Build the Dashboard"}),"\n",(0,t.jsx)(a.h3,{id:"1-install-prometheus-and-grafana-helm-chart",children:"1) Install Prometheus and Grafana Helm chart"}),"\n",(0,t.jsx)(a.p,{children:"We use the Prometheus Helm chart to install the app into the Kubernetes cluster."}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:["Install the Prometheus Helm chart, using the ",(0,t.jsx)(a.code,{children:"values.yaml"}),"from ",(0,t.jsx)(a.a,{href:"https://github.com/ml4wireless/adsb-nats/blob/master/dashboard/prometheus.yaml",children:"adsb-nats/dashboard at master \xb7 ml4wireless/adsb-nats (github.com)"})," (download the ",(0,t.jsx)(a.code,{children:"values.yaml"})," and using ",(0,t.jsx)(a.code,{children:"helm install -f values.yaml"})," when installing the helm chart\uff09"]}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://artifacthub.io/packages/helm/prometheus-community/prometheus",children:"prometheus 19.7.2 \xb7 prometheus/prometheus-community"})}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:["Install the Grafana Helm chart , using the ",(0,t.jsx)(a.code,{children:"values.yaml"})," from ",(0,t.jsx)(a.a,{href:"https://github.com/ml4wireless/adsb-nats/blob/master/dashboard/grafana.yaml",children:"adsb-nats/grafana.yaml at master \xb7 ml4wireless/adsb-nats (github.com)"}),"."]}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"https://artifacthub.io/packages/helm/grafana/grafana",children:"grafana 6.52.3 \xb7 grafana/grafana"})}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:["Get the Grafana password ",(0,t.jsx)(a.code,{children:"kubectl get secret\u200a\u2014\u200anamespace default grafana -o jsonpath=\u201d{.data.admin-password}\u201d | base64\u200a\u2014\u200adecode ; echo"}),"] (you can save it for future use)","\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:["The username is default to ",(0,t.jsx)(a.code,{children:"admin"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["Get the Grafana service IP by ",(0,t.jsx)(a.code,{children:"kubectl get svc -A"}),"  and see the external IP field of Grafana service. It\u2019s worth notice that in step 2, our ",(0,t.jsx)(a.code,{children:"values.yaml"})," indicates to the helm chart to expose Grafana service as ",(0,t.jsx)(a.code,{children:"Loadbalancer"})," type, so that the cloud provider will automatically provision an external load balancer here as the entrance of service."]}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"After all these steps, you should be able to view a grafana-style frontend page from the service IP using the username and password from step 3)."}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Untitled",src:s(869).A+"",width:"1994",height:"760"})}),"\n",(0,t.jsx)(a.h3,{id:"2-start-prometheus--grafana",children:"2) Start Prometheus & Grafana"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsx)(a.p,{children:"Prometheus"}),"\n",(0,t.jsx)(a.p,{children:"Prometheus will use the configuration file located in this directory."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-jsx",children:"prometheus\n"})}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsx)(a.p,{children:"Grafana"}),"\n",(0,t.jsx)(a.p,{children:"Start your Grafana server. Your settings may differ. Try starting with the server config included in the Grafana tarball."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-bash",children:"grafana-server --config=/usr/local/etc/grafana/grafana.ini --homepath /usr/local/share/grafana cfg:default.paths.logs=/usr/local/var/log/grafana cfg:default.paths.data=/usr/local/var/lib/grafana cfg:default.paths.plugins=/usr/local/var/lib/grafana/plugins\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(a.h3,{id:"3-adding-nats-exporter",children:"3) Adding NATS exporter"}),"\n",(0,t.jsx)(a.p,{children:"A NATS exporter is a service that scrapes the metrics from NATS, exposing these metrics to an endpoint, and then Prometheus will gather those metrics to the backend from that endpoint."}),"\n",(0,t.jsx)(a.p,{children:"After adding the NATS exporter, you should be able to see NATS related metrics in the Grafana frontend like the screenshot below."}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Untitled",src:s(4332).A+"",width:"2144",height:"998"})}),"\n",(0,t.jsx)(a.h3,{id:"4-adding-grafana-dashboard-template",children:"4) Adding Grafana Dashboard Template"}),"\n",(0,t.jsx)(a.p,{children:"The next step is to adding different dashboard template to your Grafana frontend so that you can view different system metrics in a user-friendly GUI."}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["For NATS, there exists a pretty decent template that we can directly use. ",(0,t.jsx)(a.a,{href:"https://github.com/nats-io/prometheus-nats-exporter/blob/main/walkthrough/grafana-jetstream-dash-helm.json",children:"Jetstream Dash Helm"})," is one of templates that we used in our application."]}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Untitled",src:s(9203).A+"",width:"3282",height:"2310"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(a.h3,{id:"5-adding-other-sources-of-data",children:"5) Adding other sources of data"}),"\n",(0,t.jsx)(a.p,{children:"In addition to the existing template and data sources, we can also add different sources of data to our system health dashboard. For example, in our airplane application, we used some data from our elastic search to visual the location of each reporter."}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Untitled",src:s(3994).A+"",width:"1404",height:"486"})}),"\n",(0,t.jsx)(a.p,{children:"In order to build something like this, you need to:"}),"\n",(0,t.jsxs)(a.ol,{children:["\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Add ",(0,t.jsx)(a.strong,{children:"data sources"})," to grafana"]}),"\n",(0,t.jsx)(a.p,{children:"You can add it by using its frontend GUI and insert any authentication you have for your elastic search"}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Verify and ",(0,t.jsx)(a.strong,{children:"write your own queries"})]}),"\n",(0,t.jsx)(a.p,{children:"Here is an example of Lucene Query we wrote. You might need to learn more about the language and write your own query."}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Untitled",src:s(4577).A+"",width:"2192",height:"692"})}),"\n"]}),"\n",(0,t.jsxs)(a.li,{children:["\n",(0,t.jsxs)(a.p,{children:["Adjust Grafana settings for ",(0,t.jsx)(a.strong,{children:"GUI"})]}),"\n",(0,t.jsx)(a.p,{children:"We choose geomap for our visualization since we are focusing on the location data. It is also pretty common for spectrum related application. You can also change it using Grafana frontend and adjust corresponding settings (e.g. geo marker center, scale)."}),"\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.img,{alt:"Untitled",src:s(3448).A+"",width:"806",height:"1822"})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"With these steps, you should be able to create any visualization for your application and even combine with any previous template to build a customized, pretty system health dashboard!"})]})}function c(e={}){const{wrapper:a}={...(0,n.R)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},6862:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/dashboard_1-ecdd46c51ea04c8205b4fa2c7c799d54.png"},869:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/dashboard_2-e1936e8f417417b954e9a7d1cb754016.png"},4332:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/dashboard_3-6e510de1298be850149d2d57a92b8578.png"},9203:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/dashboard_4-f2ebf73d9c6ddd9f03e0a87d6a453aef.png"},3994:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/dashboard_5-caae136c0393b349f666dbd15e4a73f7.png"},4577:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/dashboard_6-08138bf15936b10a6cf2a3845398c3a4.png"},3448:(e,a,s)=>{s.d(a,{A:()=>t});const t=s.p+"assets/images/dashboard_7-be372597678742d023582110f0dc290f.png"},8453:(e,a,s)=>{s.d(a,{R:()=>i,x:()=>d});var t=s(6540);const n={},r=t.createContext(n);function i(e){const a=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function d(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),t.createElement(r.Provider,{value:a},e.children)}}}]);